<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>App-titud Nutritiva</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    body {
      background-color: #f4f6f8;
    }
    .navbar img {
      height: 60px;
    }
    .card-icon {
      font-size: 2rem;
      color: #0d6efd;
    }
  </style>
</head>

<body>

<!-- NAVBAR -->
<nav class="navbar bg-info bg-gradient rounded m-3 px-4 text-white">
  <div class="d-flex align-items-center">
    <p class="fs-4 fw-light mb-0 me-2">App-titud Nutritiva</p>
    <img src="img/comida.svg" alt="logo">
  </div>

  <div id="zonaUsuario">
    <button class="btn btn-outline-light btn-sm" data-bs-toggle="modal" data-bs-target="#loginModal">
      Iniciar sesión
    </button>
  </div>
</nav>

<!-- HERO -->
<section class="container text-center mt-4">
  <h1 class="fw-bold">Cuida tu alimentación, cuida tu vida</h1>
  <p class="text-muted">
    Registra lo que comes, recibe sugerencias saludables y aprende a aprovechar mejor tus alimentos
  </p>
</section>

<!-- RESUMEN -->
<section class="container mt-5">
  <div class="row text-center">

    <div class="col-md-4">
      <div class="card shadow">
        <div class="card-body">
          <i class="bi bi-fire card-icon"></i>
          <h5 class="mt-2">Calorías del día</h5>
          <p id="totalCalorias">0 kcal</p>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card shadow">
        <div class="card-body">
          <i class="bi bi-egg-fried card-icon"></i>
          <h5 class="mt-2">Proteínas</h5>
          <p id="totalProteinas">0 g</p>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card shadow">
        <div class="card-body">
          <i class="bi bi-heart-pulse card-icon"></i>
          <h5 class="mt-2">Estado general</h5>
          <p id="estado">Sin datos</p>
        </div>
      </div>
    </div>

  </div>
</section>

<!-- REGISTRAR ALIMENTO -->
<section class="container mt-5">
  <h3>Registrar alimento consumido</h3>

  <form class="row g-2" onsubmit="agregarAlimento(event)">
    <div class="col-md-4">
      <input type="text" id="nombre" class="form-control" placeholder="Alimento" required>
    </div>
    <div class="col-md-2">
      <input type="number" id="calorias" class="form-control" placeholder="Calorías" required>
    </div>
    <div class="col-md-2">
      <input type="number" id="proteinas" class="form-control" placeholder="Proteínas">
    </div>
    <div class="col-md-2">
      <input type="number" id="carbs" class="form-control" placeholder="Carbohidratos">
    </div>
    <div class="col-md-2">
      <button class="btn btn-success w-100">Agregar</button>
    </div>
  </form>
</section>

<!-- TABLA -->
<section class="container mt-4">
  <div class="table-responsive shadow">
    <table class="table table-striped">
      <thead class="table-info">
        <tr>
          <th>Alimento</th>
          <th>Calorías</th>
          <th>Proteínas</th>
          <th>Carbohidratos</th>
        </tr>
      </thead>
      <tbody id="tablaAlimentos"></tbody>
    </table>
  </div>
</section>

<!-- SUGERENCIAS -->
<section class="container mt-5">
  <h3>Sugerencias saludables</h3>
  <ul id="sugerencias" class="list-group shadow"></ul>
</section>

<!-- MODAL LOGIN -->
<div class="modal fade" id="loginModal">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-info text-white">
        <h5>Iniciar sesión</h5>
        <button class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form onsubmit="login(event)">
          <input type="text" class="form-control mb-3" placeholder="Usuario" required>
          <input type="password" class="form-control mb-3" placeholder="Contraseña" required>
          <button class="btn btn-primary w-100">Entrar</button>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- JS -->
<script>
  let totalCal = 0;
  let totalProt = 0;

  function agregarAlimento(e) {
    e.preventDefault();

    const nombre = document.getElementById("nombre").value;
    const cal = parseInt(document.getElementById("calorias").value);
    const prot = parseInt(document.getElementById("proteinas").value) || 0;
    const carbs = document.getElementById("carbs").value || 0;

    totalCal += cal;
    totalProt += prot;

    document.getElementById("totalCalorias").innerText = totalCal + " kcal";
    document.getElementById("totalProteinas").innerText = totalProt + " g";

    const fila = `
      <tr>
        <td>${nombre}</td>
        <td>${cal}</td>
        <td>${prot}</td>
        <td>${carbs}</td>
      </tr>
    `;
    document.getElementById("tablaAlimentos").innerHTML += fila;

    generarSugerencias();
    e.target.reset();
  }

  function generarSugerencias() {
    const lista = document.getElementById("sugerencias");
    lista.innerHTML = "";

    if (totalCal > 2000) {
      lista.innerHTML += `<li class="list-group-item">Reduce alimentos altos en calorías y agrega verduras</li>`;
    } else {
      lista.innerHTML += `<li class="list-group-item">Buen balance calórico para el día</li>`;
    }

    if (totalProt < 50) {
      lista.innerHTML += `<li class="list-group-item">Considera agregar proteínas como huevo, pollo o legumbres</li>`;
    } else {
      lista.innerHTML += `<li class="list-group-item">Buen consumo de proteínas</li>`;
    }

    document.getElementById("estado").innerText = "En seguimiento";
  }

  function login(e) {
    e.preventDefault();
    document.getElementById("zonaUsuario").innerHTML =
      `Bienvenido | <a href="#" onclick="location.reload()" class="text-white">Cerrar sesión</a>`;
    bootstrap.Modal.getInstance(loginModal).hide();
  }
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
